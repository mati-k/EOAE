<Prefab>
  <Constants>
    <Constant Name="TopBackground.Height" BrushLayer="Default" BrushName="Inventory.TopLeft.Background" BrushValueType="Height" />
    <Constant Name="SidePanel.List.MarginTop" Value="!TopBackground.Height" />
    <Constant Name="SidePanel.MarginTop" Value="25" />
    <Constant Name="SidePanel.MarginBottom" Value="70" />
    <Constant Name="Toggle.Width" BrushLayer="Default" BrushName="Inventory.Tuple.Right" BrushValueType="Width" />
    <Constant Name="SidePanel.Width" Additive="24" Value="!Toggle.Width" />
    <Constant Name="SidePanel.NegativeWidth" MultiplyResult="-1" Value="!SidePanel.Width" />
  </Constants>
  <VisualDefinitions>
    <VisualDefinition Name="LeftMenu" EaseIn="true" TransitionDuration="0.45">
      <VisualState PositionXOffset="0" State="Default" />
    </VisualDefinition>
    <VisualDefinition Name="RightMenu" EaseIn="true" TransitionDuration="0.45">
      <VisualState PositionXOffset="0" State="Default" />
    </VisualDefinition>
    <VisualDefinition Name="TopMenu" EaseIn="true" TransitionDuration="0.45">
      <VisualState PositionYOffset="-6" State="Default" />
    </VisualDefinition>
    <VisualDefinition Name="BottomMenu" EaseIn="true" TransitionDuration="0.45">
      <VisualState PositionYOffset="6" State="Default" />
    </VisualDefinition>
  </VisualDefinitions>
  <Window>
    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
      <Children>
        <Standard.Background />
        <ListPanel Id="MainLayout" DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
          <Children>
            <!-- Left Panel -->
            <BrushWidget Id="LeftPanel" VisualDefinition="LeftMenu" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="!SidePanel.Width" PositionXOffset="!SidePanel.NegativeWidth" MarginTop="!SidePanel.MarginTop" MarginBottom="!SidePanel.MarginBottom" Brush="Frame1.Broken.Left" RenderLate="true">
              <Children>
                <ListPanel Id="ItemsListWidgetParent" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" MarginTop="!SidePanel.List.MarginTop" StackLayout.LayoutMethod="VerticalBottomToTop">
                  <Children>
                    <EnchantmentList Parameter.ListDataSource="{ItemList}" Parameter.IsRightSide="false" Parameter.ListScopeID="EnchantmentItemsListScope" />
                  </Children>
                </ListPanel>
              </Children>
            </BrushWidget>
            <Widget Id="CenterMiddlePanel" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" MarginTop="150" MarginBottom="70" AcceptDrop="true" Command.Drop="ExecuteDropOnEnchantingArea">
              <Children>
                <NavigationScopeTargeter ScopeID="LeftEquipmentScope" ScopeParent="..\LeftMenu" ScopeMovements="Vertical" UpNavigationScope="ItemTypesScope" HasCircularMovement="false" ExtendDiscoveryAreaRight="185" UseDiscoveryAreaAsScopeEdges="true" NavigateFromScopeEdges="true" />
                <Widget Id="LeftMenu" VisualDefinition="LeftMenu" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" PositionXOffset="!SidePanel.NegativeWidth">
                  <Children>
                    <EnchantmentSlot HorizontalAlignment="Left" MarginLeft="5" VerticalAlignment="Center" Parameter.BackgroundBrush="InventoryHelmetSlot" Parameter.EquipmentIndex="5" Parameter.HintDataSource="{Hint}" Parameter.IsRightSide="false" Parameter.ItemDataSource="{ItemSlot}" GamepadNavigationIndex="0" />
                  </Children>
                </Widget>
                <NavigationScopeTargeter ScopeID="RightEquipmentScope" ScopeParent="..\RightMenu" ScopeMovements="Vertical" UpNavigationScope="ItemTypesScope" HasCircularMovement="false" ExtendDiscoveryAreaLeft="215" UseDiscoveryAreaAsScopeEdges="true" NavigateFromScopeEdges="true" />
                <Widget Id="RightMenu" VisualDefinition="RightMenu" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" HorizontalAlignment="Right" PositionXOffset="!SidePanel.Width">
                  <Children>
                    <EnchantmentSlot MarginLeft="5" VerticalAlignment="Center" Parameter.BackgroundBrush="InventoryWeaponSlot" Parameter.EquipmentIndex="0" Parameter.HintDataSource="{Hint}" Parameter.IsRightSide="true" Parameter.ItemDataSource="{EnchantmentSlot}" GamepadNavigationIndex="0" />
                  </Children>
                </Widget>
              </Children>
            </Widget>
            <BrushWidget Id="RightPanel" VisualDefinition="RightMenu" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="!SidePanel.Width" PositionXOffset="!SidePanel.Width" MarginTop="!SidePanel.MarginTop" MarginBottom="!SidePanel.MarginBottom" Brush="Frame1.Broken.Right" RenderLate="true">
              <Children>
                <ListPanel Id="EnchantmentsListWidgetParent" WidthSizePolicy="CoverChildren" HeightSizePolicy="StretchToParent" MarginTop="!SidePanel.List.MarginTop" StackLayout.LayoutMethod="VerticalBottomToTop">
                  <Children>
                    <EnchantmentList Parameter.ListDataSource="{EnchantmentList}" Parameter.IsRightSide="true" Parameter.ListScopeID="EnchantmentEnchantmentsListScope" />
                  </Children>
                </ListPanel>
              </Children>
            </BrushWidget>
          </Children>
        </ListPanel>
        <!-- Close Screen Button -->
        <Standard.DialogCloseButtons VisualDefinition="BottomMenu" HorizontalAlignment="Center" VerticalAlignment="Bottom" PositionYOffset="100" Parameter.DoneButtonAction="ExecuteClose" Parameter.DoneButtonText="@DoneText" Parameter.ShowCancel="false" Parameter.DoneInputKeyDataSource="{DoneInputKey}" />
      </Children>
    </Widget>
  </Window>
</Prefab>